#!/bin/sh
# arcamini - dispatches to arcalua, arcaqjs, or arcapy based on script suffix

if [ "$#" -lt 1 ]; then
    echo "Usage: $0 [args] <script.lua|script.js|script.py>" >&2
    exit 99
fi

MACHINE=$(uname -m)

# Get last argument (POSIX way)
for last_arg; do :; done

case "$last_arg" in
    *.lua)
        exec ./arcalua."$MACHINE" "$@"
        ;;
    *.js)
        exec ./arcaqjs."$MACHINE" "$@"
        ;;
    *.py)
        exec ./arcapy."$MACHINE" "$@"
        ;;
    *)
        echo "Unknown script type: $last_arg" >&2
        exit 99
        ;;
esac
